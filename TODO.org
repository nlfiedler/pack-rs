* Action Items
** DONE test with Apache HTTPD 2.4.59 source
*** pack-rs runs use a ~release~ build
| description   | byte size | time      |
|---------------+-----------+-----------|
| apparent size |  42873125 | ---       |
| zip           |  12557798 | 0m1.458s  |
| tar.zst       |   8852419 | 0m0.379s  |
| pack-rs       |   8843264 | 0m7.728s  |
| Pack          |   8691712 | 0m0.244s  |
| tar.bz2       |   7540345 | 0m4.948s  |
| tar.xz        |   6464092 | 0m16.243s |
** DONE test with Linux 6.8.6 source
*** times are the lowest value of 3 runs
*** tests that took several minutes were run only once
| description   |       size | time      |
|---------------+------------+-----------|
| apparent size | 1420319384 | ---       |
| zip           |  297273354 | 0m41.645s |
| pack-rs       |  218058752 | 3m32.025s |
| tar.zst       |  216776407 | 0m7.536s  |
| tar.bz2       |  176093102 | 2m22.274s |
| tar.xz        |  144296084 | 9m51.828s |
** DONE test with RocksDB database; works
| description   |      size |
|---------------+-----------|
| apparent size | 912619651 |
| compressed    | 641073152 |
** DONE test with the C++98 tutorial PDF
** TODO process content bundles concurrently
*** each thread needs to have its own =Connection= instance
*** build a queue of content bundles by scanning file tree and producing sets of content bundle parameters
*** threads take parameters, read files, combine into a bundle, compress, insert ~content~ and ~itemcontent~ rows
** TODO unpack the archive concurrently
** TODO test on Windows and update prerequisites
** TODO test on RockyLinux 9 and provide install instructions
** TODO improve error handling
*** avoid the generic ~No such file or directory~ error
*** specifying files/folders that do not exist
*** specifying =pack= to list/extract when =pack.db3= exists should use that name
** TODO size content bundles dynamically
*** based on the number of incoming files (is what Pack does)
*** will need to experiment with different data sets to find appropriate sizes
** TODO consider the zstandard tuning that Pack does, maybe it helps
** TODO set database page size according to size of input set
*** if more than =1mb=, page size is =4096=, otherwise =512= (is what Pack does)
*** add a =new_with_page_size()= function or similar
*** will need to experiment with different data sets to find appropriate sizes
** TODO consider optionally compressing the content bundles
*** if compression does not make the bundle smaller, then store as-is
*** add column to =content= table that indicates the compression algorithm, or =none=
**** the =zstd= crate lacks an API for detecting if data is compressed or not
**** having an algorithm label allows for different compression algorithms
** TODO validate the pack file when opening
** TODO add files to an existing archive
*** should look up the full path and ensure parents exist
*** if an existing entry matches the full path, create a new ~content~ row and replace its ~itemcontent~ rows
**** that is, leave any existing ~content~ row alone (it may contain other files)
**** add a new ~content~ row for this new file
**** remove any ~itemcontent~ rows for this particular item
**** add new ~itemcontent~ rows for this new file
** TODO remove files from an existing archive
** TODO collect statistics when building archive and report
*** hide behind a =--verbose= global option
- directories processed
- files processed
- total bytes read
- total compressed size
** TODO consider how to encrypt file data and/or metadata
** TODO support includes/excludes when building archive
** TODO support includes/excludes when extracting archive
** TODO optionally store file times, owners, permissions in separate table
*** ~attrs~ table
| column | type    | description                 |
|--------+---------+-----------------------------|
| item   | integer | foreign key to ~item~ table |
| mode   | integer | Unix file mode              |
| attrs  | integer | Windows file attributes     |
| mtime  | integer | modified time               |
| ctime  | integer | creation time               |
| atime  | integer | accessed time               |
| user   | text    | user name                   |
| uid    | integer | user identifier             |
| group  | text    | group name                  |
| gid    | integer | group identifier            |
*** SQLite supports date/time with multiple storage classes and related functions
**** use the =INTEGER= storage class and store as Unix time
** TODO optionally store extended attributes in separate table
*** ~xattrs~ table
| column | type    | description                 |
|--------+---------+-----------------------------|
| item   | integer | foreign key to ~item~ table |
| name   | text    | name of extended attribute  |
| value  | blob    | extended attribute bytes    |
** library development plan
*** enable creating the database in memory for unit testing purposes
*** test cases
- empty files
- empty directories
- files larger than blob size
